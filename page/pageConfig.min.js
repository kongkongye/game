window.PageConfig=function(){var n=new Logger(LogConstant.SOURCE_PAGE),t={},e=function(n){return t[n]},u=function(e,u){n.info(LogType.FUNC,"添加定义: {0}",e);var i={inputDefaults:{},dependPaths:[]};t[e]=i,i.page=r(i,$.parseXML(u).childNodes[0])},r=function(n,t){var e=t.attributes,u=y(e.enable,!0),r=_(e.title,null),o=g(e.size,1),l=_(e.context,""),a=l.split(":")[0],c=-1!==l.indexOf(":")?l.split(":")[1]:"",s=[];return t.childNodes.forEach(function(t){1===t.nodeType&&s.push(i(n,t))}),{type:"page",_enable:u,_title:r,_size:o,_contextPlugin:a,_contextKey:c,lines:s}},i=function(n,t){var e=t.nodeName;if("line"===e)return o(n,t);if("list"===e)return l(n,t);if("br"===e)return a(n,t);if("import"===e)return c(n,t);throw"虚拟行类型"+e+"未识别!"},o=function(n,t){var e=t.attributes,u=_(e.con,null),r=_(e.align,null),i=[];return t.childNodes.forEach(function(t){1===t.nodeType&&i.push(s(n,t))}),{type:"line",_con:u,_align:r,components:i}},l=function(n,t){var e=t.attributes,u=_(e.con,null),r=[];return t.childNodes.forEach(function(t){1===t.nodeType&&r.push(i(n,t))}),{type:"list",_con:u,lines:r}},a=function(n,t){var e=t.attributes;return{type:"br",_con:_(e.con,null)}},c=function(n,t){var e=t.attributes,u=_(e.path,null);return u&&n.dependPaths.push(u),{type:"import",_path:u}},s=function(n,t){var e=t.nodeName;if("text"===e)return f(n,t);if("button"===e)return p(n,t);if("input"===e)return d(n,t);if("container"===e)return h(n,t);throw"组件类型"+e+"未识别!"},f=function(n,t){var e=t.attributes;return{type:"text",_con:_(e.con,null),_style:_(e.style,null),_width:g(e.width,0),_align:_(e.align,null),content:t.textContent}},p=function(n,t){var e=t.attributes;return{type:"button",_con:_(e.con,null),_style:_(e.style,null),_width:g(e.width,0),_cmd:_(e.cmd,null),_mode:_(e.mode,null),content:t.textContent}},d=function(n,t){var e=t.attributes,u=_(e.con,null),r=_(e.style,null),i=g(e.width,0),o=_(e.name,null),l=_(e.type,null),a=_(e.default,null),c=_(e.description,null),s=g(e["fix-width"],0),f=y(e.multi,!1);return a&&(n.inputDefaults[o]=a),{type:"input",_con:u,_style:r,_width:i,_name:o,_type:l,_default:a,_description:c,"_fix-width":s,_multi:f}},h=function(n,t){var e=t.attributes,u=_(e.con,null),r=_(e.style,null),i=g(e.width,0),o=_(e.align,null),l=[];return t.childNodes.forEach(function(t){1===t.nodeType&&l.push(s(n,t))}),{type:"container",_con:u,_style:r,_width:i,_align:o,components:l}},_=function(n,t){return n&&(n.value||""===n.value)?n.value:t},y=function(n,t){return n?n.value+""=="true":t},g=function(n,t){return n?parseInt(n.value):t},v=function(n){var r=$.Deferred();return e(n)?r.resolve():Conn.send(PacketConstant.CLIENT190PAGE,{path:n},!0).then(function(n){var i=n.data,o=i.path,l=i.page;if(e(o))r.resolve();else{u(o,l);var a=[];e(o).dependPaths.forEach(function(n){e(n)||a.push(v(n))}),$.whenall(a).then(function(){t[o].params=PageParam.getParams(o),r.resolve()},function(n){r.reject(n)})}},function(n){r.reject(n)}),r};return{getListSize:function(n){return e(n).page._size||10},getLines:function(n){return e(n).page.lines||[]},getNeededListParams:function(n){var e=[];return t[n].params.forEach(function(n){n.type===ParamConstant.TYPE_LIST&&e.push(n.name)}),e},getPage:e,req:v}}();