window.ParamHandler=function(){var n=new Logger(LogConstant.SOURCE_PARAM_HANDLER),a={},t={},r={},o={},P={},e={},i=function(n,a,t){if(t||(t=""),a===ParamConstant.TYPE_COMMON||a===ParamConstant.TYPE_PLAYER)e[a+":"+t]=!0;else{if(a!==ParamConstant.TYPE_PAGE&&a!==ParamConstant.TYPE_LIST&&a!==ParamConstant.TYPE_CMD&&a!==ParamConstant.TYPE_INPUT&&a!==ParamConstant.TYPE_CONTEXT)throw"变量类型'"+a+"'无法处理!";e[n+":"+a+":"+t]=!0}},f=function(n,r,o){var P;if(r===ParamConstant.TYPE_COMMON||r===ParamConstant.TYPE_PLAYER)P=a;else{if(r!==ParamConstant.TYPE_PAGE&&r!==ParamConstant.TYPE_LIST&&r!==ParamConstant.TYPE_CMD&&r!==ParamConstant.TYPE_INPUT&&r!==ParamConstant.TYPE_CONTEXT)throw"变量类型'"+r+"'无法处理!";P=t[n]}if(P){var e=P[r];if(e)if(o){var i=e[o];i&&i.forEach(function(n){n()})}else for(var f in e)e.hasOwnProperty(f)&&e[f].forEach(function(n){n()})}},s=function(n,a,t){var r=o[n];if(r){var P=r[a];if(P)if(null!==t){var e=P[t];e&&e.forEach(function(n){n()})}else for(var i in P)P.hasOwnProperty(i)&&P[i].forEach(function(n){n()})}};return setInterval(function(){var n,a;for(n in e)if(e.hasOwnProperty(n))if(2===(a=n.split(":")).length)f(null,a[0],a[1]);else{if(3!==a.length)throw"异常!";f(a[0],a[1],a[2])}e={};for(n in P)if(P.hasOwnProperty(n)){var t=(a=n.split(":"))[0]||null,r=a[1],o=a[2]||null;if(t)s(t,r,o);else{var i=Slot.getPages();for(var E in i)i.hasOwnProperty(E)&&s(E,r,o)}}P={}},200),{addParams:function(n,r){r.forEach(function(r){var o,P=r.type,e=r.name,f=r.handler;if(P===ParamConstant.TYPE_COMMON||P===ParamConstant.TYPE_PLAYER)o=a;else{if(P!==ParamConstant.TYPE_PAGE&&P!==ParamConstant.TYPE_LIST&&P!==ParamConstant.TYPE_CMD&&P!==ParamConstant.TYPE_INPUT&&P!==ParamConstant.TYPE_CONTEXT)throw"变量类型'"+P+"'无法处理!";(o=t[n])||(o={},t[n]=o)}var s=o[P];s||(s={},o[P]=s);var E=s[e];E||(E=[],s[e]=E),E.push(f),i(n,P,e)})},delParams:function(a){delete t[a],n.info(LogType.DETAIL,"清空页面ID'{0}'相关的所有变量处理器.",a)},addChange:i,addListListener:function(n,a){r[n]=r[n]||[],r[n].push(a)},delListListener:function(a){delete r[a],n.info(LogType.DETAIL,"清空页面ID'{0}'相关的所有列表处理器.",a)},addListChange:function(n,a){var t=r[n];t&&t.forEach(function(n){n(a)})},addConListener:function(n,a,t,r){o[n]=o[n]||{},o[n][a]=o[n][a]||{},o[n][a][t]=o[n][a][t]||[],o[n][a][t].push(r)},delConListener:function(a){delete o[a],n.info(LogType.DETAIL,"清空页面ID'{0}'相关的所有条件处理器.",a)},addConChange:function(n,a,t){n||(n=""),t||(t=""),P[n+":"+a+":"+t]=!0}}}();